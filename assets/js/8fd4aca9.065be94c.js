"use strict";(self.webpackChunkengineering_standards=self.webpackChunkengineering_standards||[]).push([[2256],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=i,f=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(f,o(o({ref:t},p),{},{components:n})):a.createElement(f,o({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},9207:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=n(7462),i=(n(7294),n(3905));const r={},o="Get Functional - Map and Reduce",s={unversionedId:"clientside/react/components/get-functional-map-and-reduce",id:"clientside/react/components/get-functional-map-and-reduce",title:"Get Functional - Map and Reduce",description:"map, reduce, filter, every, and some are all array methods in JavaScript. Each one will iterate over an array and perform a transformation or computation. Each will return a new array based on the result of the function (except in the case of every and some which return boolean values).",source:"@site/docs/clientside/react/components/get-functional-map-and-reduce.md",sourceDirName:"clientside/react/components",slug:"/clientside/react/components/get-functional-map-and-reduce",permalink:"/docs/clientside/react/components/get-functional-map-and-reduce",draft:!1,editUrl:"https://github.com/radically-digital/radically-digital.github.io/tree/main/docs/docs/clientside/react/components/get-functional-map-and-reduce.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Favor Functional Components",permalink:"/docs/clientside/react/components/favor-functional-components"},next:{title:"Minimise the use of Optional Chaining",permalink:"/docs/clientside/react/components/minimise-the-use-of-optional-chaining"}},l={},c=[],p={toc:c};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"get-functional---map-and-reduce"},"Get Functional - Map and Reduce"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map"},"map"),", ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce"},"reduce"),", ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"},"filter"),", ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every"},"every"),", and ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some"},"some")," are all array methods in JavaScript. Each one will iterate over an array and perform a transformation or computation. Each will return a new array based on the result of the function (except in the case of every and some which return boolean values)."),(0,i.kt)("p",null,"They simplify code as they are declarative, as opposed to imperative which is more difficult to understand and reason about."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"figuring out the return and argument types is the first challenge")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"type Person = {\n  name: string;\n  surname: string;\n};\n\nconst makeDisplayName = (person: Person): string => {\n  return `${person.name} ${person.surname}`;\n};\n\n// \ud83d\udc4e Note how we're mutating a variable in the scope of another function - this habbit means we need to ba aware of all places listOfNames is being called.\n//   Also are we sure it's iterating through all names without a breakout? Would we realise if the index started at 1 or stopped short of one list item?\nconst listOfNames = [];\n\nfor (let i = 0; i < listOfPeople.length; i++) {\n  listOfNames.push(makeDisplayName(listOfPeople[i]));\n}\n\n// \ud83d\udc4d Map is doing exactly as expected - we dont have to question if anything else is happening inside the applied iterator as it's declared what it does - `makeDisplayName`\nconst listOfNames = listOfPeople.map(makeDisplayName);\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// \ud83d\udc4e Fully Imperative\nconst isEveryNeedleInHaystack = (needles, haystack) => {\n  for (let i = 0; i < needles.length; i++) {\n    if (haystack.indexOf(needles[i]) === -1) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n// \ud83d\udc4d Fully Declarative\nconst isEveryNeedleInHaystack = (needles, haystack) =>\n  needles.every((needle) => haystack.includes(needle));\n")),(0,i.kt)("p",null,"Example of filtering a list of books with conditions."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"type Book = {\n  title: string;\n  author;\n  genre: string[];\n};\n\n// \ud83d\udc4e Imperative\nlet listOfBooks: Book[] = library;\n\nif (isOver18) {\n  listOfBooks = [...listOfBooks, ...restrictedBooks]; // mutates listOfBooks\n}\n\nif (genreSelected) {\n  const filteredBooks = []; // remember this - but only if `genreSelected` is true\n\n  for (const book of listOfBooks) {\n    if (book.genre.indexOf(genreSelected) > -1) {\n      filteredBooks.push(book);\n    }\n  }\n\n  listOfBooks = filteredBooks;\n}\n\nsetDisplayBooks(listOfBooks);\n\n// \ud83d\udc4d Declarative\nconst hasGenre = (book: Book, genreSelected: string): boolean =>\n  genreSelected ? book.includes(genreSelected) : true; // pure function that is descriptive and easy to reason about\n\nconst listOfBooks = isOver18 ? [...library, ...restrictedBooks] : library;\nconst filteredBooks = listOfBooks.filter((book) =>\n  hasGenre(book, genreSelected)\n);\n\nsetDisplayBooks(filteredBooks);\n")),(0,i.kt)("p",null,"The following example takes a list of tasks and displays the duration grouped by ",(0,i.kt)("inlineCode",{parentName:"p"},"dueWeek")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"priority"),". Functional methods allow us to break out of control flow with the use of ",(0,i.kt)("inlineCode",{parentName:"p"},"return")," - something which is not allowed in imperative for-loops. We need to continue reading and understanding the code in case something is mutated later on."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'type Priority = "low" | "med" | "high";\ntype Task = {\n  name: string;\n  priority: Priority;\n  durationMinutes: number;\n  weekDue: number;\n};\n\ntype TimeEstimation = { weekDue: number } & Partial<Record<Priority, number>>; // { weekdue, low?, med?, high? }\n\nconst getIndex = (timeEstimations: TimeEstimation[], task: Task) =>\n  timeEstimations.findIndex(\n    (timeEstimation) => timeEstimation.weekDue === task.weekDue\n  );\n\n// \ud83d\udc4e Imperative\nconst weeklyEstimations = (tasks: Task[]): TimeEstimation[] => {\n  const timeEstimations: TimeEstimation[] = [];\n\n  for (const task of tasks) {\n    const existingIndex = getIndex(timeEstimations, task);\n    const existing = timeEstimations[existingIndex];\n\n    if (existing) {\n      const existingDuration = existing[task.priority];\n\n      if (existingDuration) {\n        existing[task.priority] += task.durationMinutes;\n      } else {\n        existing[task.priority] = task.durationMinutes;\n      }\n    } else {\n      timeEstimations.push({\n        weekDue: task.weekDue,\n        [task.priority]: task.durationMinutes,\n      });\n    }\n  }\n\n  return timeEstimations;\n};\n\n// \ud83d\udc4d Declarative\nconst replaceAt = <T>(index: number, data: T, arr: T[]): T[] => {\n  arr.splice(index, 1, data);\n  return arr;\n};\n\nconst weeklyEstimations = (tasks: Task[]): TimeEstimation[] =>\n  tasks.reduce<TimeEstimation[]>((timeEstimations, task) => {\n    const existingIndex = getIndex(timeEstimations, task);\n    const existing = timeEstimations[existingIndex];\n\n    if (existing) {\n      const durationMinutes = existing[task.priority] || 0;\n\n      return replaceAt(\n        existingIndex,\n        {\n          ...existing,\n          [task.priority]: durationMinutes + task.durationMinutes,\n        },\n        timeEstimations\n      );\n    }\n\n    return [\n      ...timeEstimations,\n      { weekDue: task.weekDue, [task.priority]: task.durationMinutes },\n    ];\n  }, []);\n')))}d.isMDXComponent=!0}}]);